<!DOCTYPE html>
<html lang="zh-CN" class="no-js">
<!-- BEGIN HEAD -->

<head>
        <link rel="canonical" href="https://vlessgithub.github.io/news/article-24566.htm" />
    <meta charset="utf-8" />
    <title>c++语法拾遗，一些细节与特性</title>
        <meta name="description" content="写了2年多的C+STL的acmer，在学习《C++ primer》时总结的一些少见的语法特性与细节。总体还是和题目说的一样这是一篇 c++ 拾遗。  1.1 基本类型 1.1.1 字面常量 0123 " />
        <link rel="icon" href="/assets/website/img/vlessgithub/favicon.ico" type="image/x-icon"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <!-- GLOBAL MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Hind:300,400,500,600,700" rel="stylesheet" type="text/css">
    <link href="/assets/website/js/frontend/vlessgithub/simple-line-icons/css/simple-line-icons.css" rel="stylesheet" type="text/css" />
    <link href="/assets/website/js/frontend/vlessgithub/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- PAGE LEVEL PLUGIN STYLES -->
    <link href="/assets/website/css/vlessgithub/animate.css" rel="stylesheet">
    <link href="/assets/website/js/frontend/vlessgithub/swiper/css/swiper.min.css" rel="stylesheet" type="text/css" />
    <!-- THEME STYLES -->
    <link href="/assets/website/css/vlessgithub/layout.min.css" rel="stylesheet" type="text/css" />
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X2HXTZV7HY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-X2HXTZV7HY');
</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3332997411212854"
     crossorigin="anonymous"></script>
</head>
<!-- END HEAD -->
<!-- BODY -->

<body id="body" data-spy="scroll" data-target=".header" data-page="detail">
        <!--========== HEADER ==========-->
    <header class="header navbar-fixed-top">
        <!-- Navbar -->
        <nav class="navbar" role="navigation">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="menu-container js_nav-item">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="toggle-icon"></span>
                    </button>
                    <!-- Logo -->
                    <div class="logo">
                                                <a class="logo-wrap" href="/">
                            <span>Vless Github</span>
                        </a>
                                            </div>
                    <!-- End Logo -->
                </div>
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse nav-collapse">
                    <div class="menu-container">
                        <ul class="nav navbar-nav navbar-nav-right">
                                                        <li class="nav-item"><a class="nav-item-child nav-item-hover" href="/">首页</a></li>
                                                        <li class="nav-item"><a class="nav-item-child nav-item-hover" href="/free-nodes/">免费节点</a></li>
                                                        <li class="nav-item"><a class="nav-item-child nav-item-hover" href="/paid-subscribe/">推荐机场</a></li>
                                                        <li class="nav-item"><a class="nav-item-child nav-item-hover" href="/news/">新闻资讯</a></li>
                                                        <li class="nav-item"><a class="nav-item-child nav-item-hover" href="#">关于</a></li>
                            <li class="nav-item"><a class="nav-item-child nav-item-hover" href="#">联系</a></li>
                        </ul>
                    </div>
                </div>
                <!-- End Navbar Collapse -->
            </div>
        </nav>
        <!-- Navbar -->
    </header>
    <!--========== END HEADER ==========-->
    <!--========== SLIDER ==========-->
    <div class="promo-block category">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 sm-margin-b-60">
                    <div class="margin-b-30">
                        <h1 class="promo-block-title">c++语法拾遗，一些细节与特性</h1>
                        <p class="promo-block-text">
                            <a href="/">首页</a> / <a href="/news/">新闻资讯</a> / 正文
                        </p>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="promo-block-img-wrap">
                        <img class="promo-block-img img-responsive" src="/assets/website/img/vlessgithub/mockup/avatar-01.png" align="Avatar">
                    </div>
                </div>
            </div>
            <!--// end row -->
        </div>
    </div>
    <!--========== SLIDER ==========-->
    <!--========== PAGE LAYOUT ==========-->
    <!-- About -->
    <div id="about">
        <div class="container content-lg">
            <div class="row">
                <div class="col-md-9">
                                    <input type="hidden" id="share-website-info" data-name="" data-url="">
                  				  				  				<p>写了2年多的C+STL的acmer，在学习《C++ primer》时总结的一些少见的语法特性与细节。总体还是和题目说的一样这是一篇 c++ 拾遗。</p> </h1> <h2 id="11-基本类型">1.1 基本类型</h2> <h3 id="111-字面常量">1.1.1 字面常量</h3> <p>0123 表示的不是带有前导0的数字123，而是代表8进制数字123。</p> <h2 id="12-常量">1.2 常量</h2> <h3 id="121-constexpr">1.2.1 constexpr</h3> <p>constexpr变量能自动判别赋值的表达式是否是常量表达式，若不是则会报错。</p> <pre><code class="language-c++">constexpr int mf=20;        //20是常量表达式 constexpr int limit=mf+1;   //mf+1是常量表达式 constexpr int sz=size();    //当size是一个constexpr 函数的时候是是常量表达式 int a=20; constexpr int b=a+1;        //报错</code></pre> <h2 id="12-处理类型">1.2 处理类型</h2> <h3 id="121-decltype">1.2.1 decltype</h3> <p>decltype能和auto类似的自动判别类型。</p> <pre><code class="language-c++">decltype(f()) a=b;  //这里的a的类型是f()返回值的类型</code></pre> <p>编译器并不实际调用函数f，只是将返回值作为a的类型。<br /> 实际上decltype(exp) exp是一个表达式所以可以这么写</p> <pre><code class="language-c++">int a = 0; decltype(a) b = 1;          //b 被推导成了 int decltype(10.8) x = 5.5;     //x 被推导成了 double decltype(x + 100) y;        //y 被推导成了 double</code></pre> <ul> <li>如果 exp 是一个不被括号( )包围的表达式，或者是一个类成员访问表达式，或者是一个单独的变量，那么 decltype(exp) 的类型就和 exp 一致。</li> <li>如果 exp 是函数调用，那么 decltype(exp) 的类型就和函数返回值的类型一致。</li> <li>如果 exp 是一个左值，或者被括号( )包围，那么 decltype(exp) 的类型就是 exp 的引用。</li> </ul> </h1> <h2 id="21-基础">2.1 基础</h2> <h3 id="211-左值">2.1.1 左值</h3> <p>简单的一句话说，左值就是内存。</p> <h3 id="212-右值">2.1.2 右值</h3> <p>简单的一句话说，右值就是数据。</p> <h3 id="213-求值顺序">2.1.3 求值顺序</h3> <p>c++ 中没有定义表达式的求值顺序，如：</p> <pre><code class="language-c++">int cnt=0; int f(){     return ++cnt; } int main(){     int a=f()-f();      //a的结果可能会因为编译器不同而不同                         //因为两个f函数的调用顺序没有定义     return 0; }</code></pre> <pre><code class="language-c++">int a=1; int b=a+a++;            //同样，i的自增和i的调用顺序没定义 int c=a++ + ++a;        //同样无定义 int *d= new int[2]; *d=f(*d++);                 //无定义</code></pre> <p>另外java是有定义表达式的求值顺序的，从左到右。c++不定义是为了编译器启用更多优化。</p> </h1> <h2 id="31-可变参数的函数">3.1 可变参数的函数</h2> <h3 id="311-initializer_list-形参">3.1.1 initializer_list 形参</h3> <pre><code class="language-c++">int sum(initializer_list&lt;int&gt; li){     int s=0;     for(auto i : li)         s+=i;     return s; }  // 调用方法  sum({1,2,3,4,5}); sum({1,1,1,1});</code></pre> <p>initializer_lsit 对象中的元素永远是常量类型。<br /> 可使用begin、end、size方法进行操作。</p> <h3 id="312-省略符形参">3.1.2 省略符形参</h3> <pre><code class="language-c++">void f(...); void f(cnt,...);</code></pre> <p>不建议使用，仅为方便c++访问某些c代码设置。</p> <h2 id="32-函数返回">3.2 函数返回</h2> <h3 id="321-值如何被返回的">3.2.1 值如何被返回的</h3> <p>值返回的时候回调用拷贝构造函数，创建一个临时对象。</p> <h3 id="322-列表返回值">3.2.2 列表返回值</h3> <p>C++11 新标准规定，函数可以返回花括号包围的值的列表。</p> <pre><code class="language-c++">vector&lt;int&gt; f(){     return {1,2,3,4}; }</code></pre> <p>实际上就是花括号赋值，因为值返回的时候回调用拷贝构造函数，如果拷贝构造函数支持花括号，那就可以作为返回值。</p> <h3 id="323-返回数组指针">3.2.3 返回数组指针</h3> <pre><code class="language-c++">int (*f)()[size];   //表示函数f返回长度为size的数组指针                     //特别的是这里数组表示是后置的</code></pre> <h3 id="324-尾值返回类型">3.2.4 尾值返回类型</h3> <p>在C++11标准中添加了一种尾置返回类型的定义。</p> <pre><code class="language-c++">auto f()-&gt;int;          //同等于 int f(); auto f()-&gt;int *[size];  //同等于 int (*f)()[size];</code></pre> <h2 id="33-重载">3.3 重载</h2> <h3 id="331重载与const-形参">3.3.1重载与const 形参</h3> <p>顶层的const无法和另一个没有顶层的const的参数区分，但底层的const可以区分</p> <pre><code class="language-c++">void f(int); void f(const int);      //重复声明，报错  void f(int *) void f(int *const)      //重复声明  void f1(int*); void f1(const int*);    //底层const，新函数。  void f1(int&amp;); void f1(const int&amp;);    //底层const，新函数。</code></pre> <h3 id="332-重载与作用域">3.3.2 重载与作用域</h3> <p>当在作用域内重复定义标识符，作用域内的标识符将会直接覆盖外部的标识符，包括重载的。</p> <pre><code class="language-c++">void f(int);        //函数1 void f(char);       //函数2 void f(double);     //函数3 void foo(){     void f(double); //函数4     f(1.2);         //正确调用函数4     f(1);           //正确调用函数4,传入值为1.0     f('c')          //错误，没定义 }</code></pre> <h2 id="34-特殊用途语言特性">3.4 特殊用途语言特性</h2> <h3 id="341-默认实参">3.4.1 默认实参</h3> <p>可给函数的参数设置默认实参，但缺省的调用时，会默认赋值。</p> <pre><code class="language-c++">void f(int a,int b,int c=1,int d=2,int e=3);    //声明  //调用 f(1,2);         //实际为f(1,2,1,2,3); f(1,2,3);       //实际为f(1,2,3,2,3); f(1,2,3,4,5);   //实际为f(1,2,3,4,5);</code></pre> <p>设置默认实参只能从右到左，并且不能留空。</p> <pre><code class="language-c++">void f(int a=1,int b=2);        //正确 void f(int a=1,int b);          //错误 void f(int a,int b=1,int c);    //错误</code></pre> <p>默认值可赋函数、变量或者表达式。</p> <pre><code class="language-c++">int x=1; int v(); void f(int a=x,int b=v()); // 将在调用f时，调用v，为函数参数赋值</code></pre> <h3 id="342-内联函数-inline">3.4.2 内联函数 inline</h3> <p>在函数的返回类型前面加上关键字inline，就可以将函数声明为内联函数。内联函数有点类似c的宏函数，它会在每一个调用的位置，内联的展开，从而节省函数调用和返回的开销。但内联函数声明只是向编译器发出的请求，编译器可以选择忽略。</p> <pre><code class="language-c++">inline void f();</code></pre> <p>内联函数定义通常放在头文件中</p> <h3 id="343-constexpr-函数">3.4.3 constexpr 函数</h3> <p>该函数相当于一个常量表达式。</p> <pre><code class="language-c++">constexpr int f();</code></pre> <p>constexpr 函数定义通常放在头文件中</p> <h2 id="35-调试帮助">3.5 调试帮助</h2> <h3 id="351-assert-预处理宏">3.5.1 assert 预处理宏</h3> <pre><code class="language-c++">assert(expr);</code></pre> <p>当expr为假时输出信息并终止程序。</p> <h3 id="352-ndebug-预处理变量">3.5.2 NDEBUG 预处理变量</h3> <p>当定义NDEBUG后，表示关闭调试。<br /> 自定义调试</p> <pre><code class="language-c++">#ifndef NDEBUG     //调试代码 #endif</code></pre> <p>对调试有帮助的标识符</p> <ul> <li>__func__ 当前函数名   字符串</li> <li>__FILE__ 文件名       字符串</li> <li>__LINE__ 当前行号     整型</li> <li>__TIME__ 编译时间     字符串</li> <li>__DATE__ 编译日期     字符串</li> </ul> 			                <div class="clearfix"></div>
                <div class="col-md-12 mt-5">
                                        <p>上一个：<a href="/news/article-24090.htm">天津市宠物领养机构有哪些（天津市宠物领养机构有哪些公司）</a></p>
                                        <p>下一个：<a href="/news/article-24567.htm">安安宠医总部电话（安安宠医简介）</a></p>
                                    </div>
                                </div>
                <div class="col-md-3">
                    <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">热门文章</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2"><a href="/free-nodes/2024-12-5-latest-vless-node.htm" title="「12月5日」最高速度21.1M/S，2024年Vless每天更新免费机场订阅节点链接">「12月5日」最高速度21.1M/S，2024年Vless每天更新免费机场订阅节点链接</a></li>
                        <li class="py-2"><a href="/news/article-21333.htm" title="我所在的城市里有一家宠物医院用英语怎么说 我所在的城市里有一家宠物医院用英语怎么说">我所在的城市里有一家宠物医院用英语怎么说 我所在的城市里有一家宠物医院用英语怎么说</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-11-24-latest-vless-node.htm" title="「11月24日」最高速度18.6M/S，2024年Vless每天更新免费机场订阅节点链接">「11月24日」最高速度18.6M/S，2024年Vless每天更新免费机场订阅节点链接</a></li>
                        <li class="py-2"><a href="/news/article-21788.htm" title="海拉鲁地图怎么获得（海拉鲁图鉴怎么收集）">海拉鲁地图怎么获得（海拉鲁图鉴怎么收集）</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-11-10-vless-windows.htm" title="「11月10日」最高速度21.2M/S，2024年Vless每天更新免费机场订阅节点链接">「11月10日」最高速度21.2M/S，2024年Vless每天更新免费机场订阅节点链接</a></li>
                        <li class="py-2"><a href="/news/article-21332.htm" title="给动物打疫苗要多少钱一次呀图片（给动物打疫苗要多少钱一次呀图片）">给动物打疫苗要多少钱一次呀图片（给动物打疫苗要多少钱一次呀图片）</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-10-17-free-high-speed-nodes.htm" title="「10月17日」最高速度22.7M/S，2024年Vless每天更新免费机场订阅节点链接">「10月17日」最高速度22.7M/S，2024年Vless每天更新免费机场订阅节点链接</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-12-4-today-vless-node.htm" title="「12月4日」最高速度18.2M/S，2024年Vless每天更新免费机场订阅节点链接">「12月4日」最高速度18.2M/S，2024年Vless每天更新免费机场订阅节点链接</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-12-12-vless-node-github.htm" title="「12月12日」最高速度22.4M/S，2024年Vless每天更新免费机场订阅节点链接">「12月12日」最高速度22.4M/S，2024年Vless每天更新免费机场订阅节点链接</a></li>
                        <li class="py-2"><a href="/news/article-21789.htm" title="动物疫苗价格表最新图片大全集下载（动物疫苗价格表最新图片大全集下载）">动物疫苗价格表最新图片大全集下载（动物疫苗价格表最新图片大全集下载）</a></li>
                    </ul>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">归纳</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">57</span> <a href="/date/2024-12/" title="2024-12 归档">2024-12</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">33</span> <a href="/date/2024-11/" title="2024-11 归档">2024-11</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">31</span> <a href="/date/2024-10/" title="2024-10 归档">2024-10</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">28</span> <a href="/date/2024-09/" title="2024-09 归档">2024-09</a></h4>
            </li>
                    </ul>
    </div>
</div>

                </div>
            </div>
            <!--// end row -->
        </div>
    </div>
    <!-- End About -->
    <!--========== END PAGE LAYOUT ==========-->
        <!--========== FOOTER ==========-->
    <footer class="footer">
        <div class="content container">
            <div class="row">
                <div class="col-xs-12 text-center">
                            <p>
                                <a href="/">首页</a> | 
                                <a href="/free-node/">免费节点</a> | 
                                <a href="/news/">新闻资讯</a> |
                                <a href="/about-us.htm">关于我们</a> |
                                <a href="/disclaimer.htm">免责申明</a> |
                                <a href="/privacy.htm">隐私申明</a> |
                                <a href="/sitemap.xml">网站地图</a>
                            </p>
                    <p class="margin-b-0">Vless Github机场订阅官网 版权所有 Powered by WordPress</p>
                </div>
            </div>
            <!--// end row -->
        </div>
    </footer>
    <!--========== END FOOTER ==========-->
    <!-- Back To Top -->
    <a href="javascript:void(0);" class="js-back-to-top back-to-top">Top</a>
    <!-- JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
    <!-- CORE PLUGINS -->
    <script src="/assets/website/js/frontend/vlessgithub/jquery-3.5.1.min.js"></script>
    <script src="/assets/website/js/frontend/vlessgithub/jquery-migrate.min.js" type="text/javascript"></script>
    <script src="/assets/website/js/frontend/vlessgithub/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <!-- PAGE LEVEL PLUGINS -->
    <script src="/assets/website/js/frontend/vlessgithub/jquery.easing.js" type="text/javascript"></script>
    <script src="/assets/website/js/frontend/vlessgithub/jquery.back-to-top.js" type="text/javascript"></script>
    <script src="/assets/website/js/frontend/vlessgithub/jquery.smooth-scroll.js" type="text/javascript"></script>
    <script src="/assets/website/js/frontend/vlessgithub/jquery.wow.min.js" type="text/javascript"></script>
    <script src="/assets/website/js/frontend/vlessgithub/jquery.parallax.min.js" type="text/javascript"></script>
    <script src="/assets/website/js/frontend/vlessgithub/jquery.appear.js" type="text/javascript"></script>
    <script src="/assets/website/js/frontend/vlessgithub/swiper/js/swiper.jquery.min.js" type="text/javascript"></script>
    <!-- PAGE LEVEL SCRIPTS -->
    <script src="/assets/website/js/frontend/vlessgithub/layout.min.js" type="text/javascript"></script>
    <script src="/assets/website/js/frontend/vlessgithub/components/progress-bar.min.js" type="text/javascript"></script>
    <script src="/assets/website/js/frontend/vlessgithub/components/swiper.min.js" type="text/javascript"></script>
    <script src="/assets/website/js/frontend/vlessgithub/components/wow.min.js" type="text/javascript"></script>
    <script src="https://www.freeclashnode.com/assets/js/frontend/invite-url.js"></script>
    <script src="/assets/website/js/frontend/G.js"></script>
</body>
<!-- END BODY -->

</html>